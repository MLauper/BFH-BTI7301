(ql:quickload 'asdf)
(ql:quickload 'LUCERNE)

(in-package :cl-user)
(defpackage thefuseproject
  (:use :cl :lucerne)
  (:export :app))
(in-package :thefuseproject)
(annot:enable-annot-syntax)


;;; App

(defapp app
  :middlewares ((clack.middleware.static:<clack-middleware-static>
                 :root "/root/BFH-BTI7301/web/assets/"
                 :path "/w/")))

;;; Views

@route app "/api/ls/:noHomo"
(defview ls (noHomo)
  (respond noHomo))

@route app "/"
(defview index ()
  (redirect "/w/index.html"))

(start app)